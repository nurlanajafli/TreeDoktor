"use strict";(self.webpackChunkportal=self.webpackChunkportal||[]).push([[975],{3975:(x,p,o)=>{o.r(p),o.d(p,{PayModule:()=>C});var s=o(8583),e=o(639),m=o(9441),r=o(2498),d=o(9846),c=o(9075);let f=(()=>{class n{constructor(t){this.sanitized=t}transform(t){return this.sanitized.bypassSecurityTrustResourceUrl(t)}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(c.H7,16))},n.\u0275pipe=e.\u0275\u0275definePipe({name:"safeUrl",type:n,pure:!0}),n})();function u(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"span",7),e.\u0275\u0275text(2,"Invoice"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("#",t.ps.estimate.invoice.invoice_no,"")}}function y(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"div",9),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("In order to confirm this estimate we would need a ",t.ps.office.percents_estimate_deposit||"0","% deposit.")}}function h(n,i){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div"),e.\u0275\u0275elementStart(2,"span",7),e.\u0275\u0275text(3,"Estimate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(6,y,2,1,"div",8),e.\u0275\u0275elementContainerEnd()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate2("#",t.ps.estimate.estimate_no," Rev. ",t.ps.estimate.estimate_review_number,""),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","1"!=(null==t.ps.estimate.estimate_status?null:t.ps.estimate.estimate_status.est_status_confirmed))}}const v=function(n){return{height:n}},g=[{path:"",component:(()=>{class n{constructor(t,a,l){this.ps=t,this.router=a,this.ui=l}onMessage(t){t.data.portal_pay&&(t.data.height&&(this.height=t.data.height),t.data.width&&(this.width=t.data.width),t.data.sending?this.ui.alert_show({text:"Making Payment...",icon:"alert-spinner"}):t.data.payed?(this.ui.alert_destroy(),this.ps.fetchEstimate(()=>{this.router.navigate([`/${this.ps.token}`])})):t.data.error&&this.ui.alert_destroy())}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(m.E),e.\u0275\u0275directiveInject(r.F0),e.\u0275\u0275directiveInject(d.F))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-pay"]],hostBindings:function(t,a){1&t&&e.\u0275\u0275listener("message",function(P){return a.onMessage(P)},!1,e.\u0275\u0275resolveWindow)},decls:10,vars:10,consts:[[1,"head-est"],[4,"ngIf"],[1,"payment-box"],["width","100%","frameborder","0",3,"ngStyle","src"],["frame",""],[1,"link-back",3,"routerLink"],[1,"link"],[1,"mr10"],["class","pay-deposit-info",4,"ngIf"],[1,"pay-deposit-info"]],template:function(t,a){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,u,5,1,"ng-container",1),e.\u0275\u0275template(2,h,7,3,"ng-container",1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",2),e.\u0275\u0275element(4,"iframe",3,4),e.\u0275\u0275pipe(6,"safeUrl"),e.\u0275\u0275elementStart(7,"div",5),e.\u0275\u0275elementStart(8,"a",6),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.ps.estimate.invoice),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!a.ps.estimate.invoice),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(8,v,a.height+"px"))("src",e.\u0275\u0275pipeBind1(6,6,a.ps.domain+"/portal/api/estimate/payment_form/"+a.ps.token),e.\u0275\u0275sanitizeResourceUrl),e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate1("routerLink","/",a.ps.token,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("back to ",a.ps.estimate.invoice?"invoice":"estimate",""))},directives:[s.O5,s.PC,r.rH],pipes:[f],styles:[""]}),n})()}];let C=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[[r.Bz.forChild(g),s.ez]]}),n})()}}]);